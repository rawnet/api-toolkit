
<!DOCTYPE html>
<html>
  
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="api.toolkit.js"></script>

    <style>
      .posts {
        opacity: 0;
        transition: opacity 0.5s;
      }

      .posts--is-visible {
        opacity: 1;
      }
    </style>
  </head>

  <body>
    <!-- API Form -->
    <form action="posts.php" method="GET" name="posts" id="posts">
      <input type="hidden" name="posts[page]" value="1" id="page"/>
    </form>

    <h1>Posts</h1>
    <ul class="posts">
      <!-- Handlebars Template -->
      <script id="post" type="text/x-handlebars-template">
        <li class="post">
          <h3>{{title}}</h3>
          <p>{{body}}</p>
        </li>
      </script>
      <!-- / Handlebars Template -->
    </ul>

    <script>

    // Initialise a session instance
    var session = new API.Session();

    // Initialise a listing instance
    var listing = new API.Listing({
      element: $('.posts'),
      template: Handlebars.compile($('#post').html()),
      animationClass: 'posts--is-visible',
      anmationDuration: 500
    });

    // On a successful connection
    session.on('success', handleResponse);

    // Make the call
    session.connect($('#posts'));

    // Handle the response
    function handleResponse() {
      // Render the listing
      listing.render(this.response.items);
    }

    </script>

  </body>

</html>